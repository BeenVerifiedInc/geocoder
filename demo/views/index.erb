<html>
<head>
<style type="text/css">
    html {font-family: Arial, sans-serif;}
    table {font-size: 8pt; border-collapse: collapse;}
    td { border: 1px solid black; padding: .25em .5em .25em .5em; }
</style>
</head>
<body>
<p><b>Geocoder Demo</b></p>
<p>
<form>
<input type="text" name="address" value="<%= params[:address] %>" size="80">
<input type="submit" value="Geocode" />
</form>
</p>
<% unless @records.nil? %>
    <table>
    <tr>
        <td>Match</td>
        <td>Lat</td>
        <td>Lon</td>
        <td>#</td>
        <td>Qual</td>
        <td>Dir</td>
        <td>Type</td>
        <td>Street</td>
        <td>Type</td>
        <td>Dir</td>
        <td>Qual</td>
        <td>City</td>
        <td>St</td>
        <td>ZIP</td>
        <td>&nbsp;</td>
    </tr>
    <% for record in @records %>
      <tr>
        <td><%= format("%.2f", record[:score]*100) %>%</td>
        <td><%= record[:lat].to_s %></td>
        <td><%= record[:lon].to_s %></td>
        <td><%= record[:prefix] if record[:prefix] %><%= record[:number] %></td>
        <td><%= record[:pretyp] %></td>
        <td><%= record[:predir] %></td>
        <td><%= record[:prequal] %></td>
        <td><%= record[:street] %></td>
        <td><%= record[:suftyp] %></td>
        <td><%= record[:sufdir] %></td>
        <td><%= record[:sufqual] %></td>
        <td><%= record[:city] %></td>
        <td><%= record[:state] %></td>
        <td><%= record[:zip] %></td>
        <td><a href="http://maps.google.com/maps?q=<%=record[:lat]%>,<%=record[:lon]%>"
                    target="_blank">map</a></td>
      </tr>
    <% end %>
    </table>
<% end %>
</body>
</html>
